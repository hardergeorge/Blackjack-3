<h1>BlackJack</h1>

<script type="text/javascript" src="/assets/webjars/jquery/2.1.3/jquery.js"></script>

<body>
<!-- DEALER -->
<table id = "table">
    <tr class="title">
        <p>Dealer</p>
        <td>Column 0</td>
        <td >Column 1</td>
        <td >Column 2</td>
        <td >Column 3</td>
    </tr>

    <tr><td class="columnOfCards" id="c0">
        <table>
            <tr><td class="cardLocation l0"></td></tr>
            <tr><td class="cardLocation l1"></td></tr>
            <tr><td class="cardLocation l2"></td></tr>
            <tr><td class="cardLocation l3"></td></tr>
            <tr><td class="cardLocation l4"></td></tr>
            <tr><td class="cardLocation l5"></td></tr>
            <tr><td class="cardLocation l6"></td></tr>
            <tr><td class="cardLocation l7"></td></tr>
            <tr><td class="cardLocation l8"></td></tr>
            <tr><td class="cardLocation l9"></td></tr>
            <tr><td class="cardLocation l10"></td></tr>
            <tr><td class="cardLocation l11"></td></tr>
            <tr><td class="cardLocation l12"></td></tr>
            <tr><td class="cardLocation l13"></td></tr>
        </table>
    </td>
        <td class="columnOfCards" id="c1">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c2">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c3">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
    </tr>
</table>
<!-- PLAYER -->
<table id = "table1">
    <tr class="title">
        <p>Player</p>
        <td>Column 0</td>
        <td >Column 1</td>
        <td >Column 2</td>
        <td >Column 3</td>
    </tr>

    <tr><td class="columnOfCards" id="c4">
        <table>
            <tr><td class="cardLocation l0"></td></tr>
            <tr><td class="cardLocation l1"></td></tr>
            <tr><td class="cardLocation l2"></td></tr>
            <tr><td class="cardLocation l3"></td></tr>
            <tr><td class="cardLocation l4"></td></tr>
            <tr><td class="cardLocation l5"></td></tr>
            <tr><td class="cardLocation l6"></td></tr>
            <tr><td class="cardLocation l7"></td></tr>
            <tr><td class="cardLocation l8"></td></tr>
            <tr><td class="cardLocation l9"></td></tr>
            <tr><td class="cardLocation l10"></td></tr>
            <tr><td class="cardLocation l11"></td></tr>
            <tr><td class="cardLocation l12"></td></tr>
            <tr><td class="cardLocation l13"></td></tr>
        </table>
    </td>
        <td class="columnOfCards" id="c5">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c6">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c7">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
    </tr>
</table>
<div id = "panel">
    <button id="qMarkButton"> ? </button>
    <button id="hit">Hit</button>
    <button id="stay">Stay</button>
    <button id="doubleD">Double Down</button>
    <button id="split">Split</button>
    <!--
        <BR>Move from column
        <select id="from_col"  />
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>

        </select>
        to column
        <select id="to_col"  />
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        </select>
     -->

    </div>
    <script>

    var game;

    function display(game) {
    console.log(game);

    $( '.columnOfCards .cardLocation' ).html("");

        $.each(game.cols[0], function( key, val ) {
            $( '#c0 .l'+key ).html(val.value + val.suit);
            if(val.suit == "Hearts")
            {
            $('#c0 .l'+key).css("background-color","red");
            }
            else if(val.suit == "Diamonds")
            {
            $('#c0 .l'+key).css("background-color","yellow");
            }
            else if(val.suit == "Clubs")
            {
            $('#c0 .l'+key).css("background-color","green");
            }
            else
            {
            $('#c0 .l'+key).css("background-color","orange");
            }
        });

     $.each(game.cols[1], function( key, val ) {
            $( '#c1 .l'+key ).html(val.value + val.suit);
            if(val.suit == "Hearts")
            {
            $('#c1 .l'+key).css("background-color","red");
            }
            else if(val.suit == "Diamonds")
            {
            $('#c1 .l'+key).css("background-color","yellow");
            }
            else if(val.suit == "Clubs")
            {
            $('#c1 .l'+key).css("background-color","green");
            }
            else
            {
            $('#c1 .l'+key).css("background-color","orange");
            }
        });

     $.each(game.cols[2], function( key, val ) {
            $( '#c2 .l'+key ).html(val.value + val.suit);
            if(val.suit == "Hearts")
            {
            $('#c2 .l'+key).css("background-color","red");
            }
            else if(val.suit == "Diamonds")
            {
            $('#c2 .l'+key).css("background-color","yellow");
            }
            else if(val.suit == "Clubs")
            {
            $('#c2 .l'+key).css("background-color","green");
            }
            else
            {
            $('#c2 .l'+key).css("background-color","orange");
            }
        });

     $.each(game.cols[3], function( key, val ) {
            $( '#c3 .l'+key ).html(val.value + val.suit);
            if(val.suit == "Hearts")
            {
            $('#c3 .l'+key).css("background-color","red");
            }
            else if(val.suit == "Diamonds")
            {
            $('#c3 .l'+key).css("background-color","yellow");
            }
            else if(val.suit == "Clubs")
            {
            $('#c3 .l'+key).css("background-color","green");
            }
            else
            {
            $('#c3 .l'+key).css("background-color","orange");
            }
        });

        if(game.error == true){
            var div = document.getElementById('Error-div');
            if(div === null){
                //console.log("Error");
                var div = document.createElement('div');
                div.id = 'Error-div';
                var text = document.createElement('h4');
                text.innerHTML = 'Error: You cannot remove that card';
                div.appendChild(text);
                document.body.appendChild(div);
            }
        }
        else{
            var div = document.getElementById('Error-div');
            if(div === null){}
            else{
                div.remove();
            }
        }
    }

    $.getJSON("http://localhost:8080/game", function( data ) {
    display(data);
    game = data;
    });


    $("#dealButton").click(function(){
    $.ajax({
      type: "POST",
      url: "/dealGame",
      data: JSON.stringify(game),
      success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
            game = data;
            display(data);},
      contentType:"application/json; charset=utf-8",
      dataType:"json",
    });
    });


    function removeCard(colNumber){
        $.ajax({
            type: "POST",
            url: "/removeCard/"+colNumber,
            data: JSON.stringify(game),
            success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
            game = data;
            display(data);},
            contentType:"application/json; charset=utf-8",
            dataType:"json",
        });
    }


    $("#Remove1").click(function(){
        removeCard(0);
    });
    $("#Remove2").click(function(){
        removeCard(1);
    });
    $("#Remove3").click(function(){
        removeCard(2);
    });
    $("#Remove4").click(function(){
        removeCard(3);
    });


    $("#moveButton").click(function(){
    var colFrom = $("#from_col").val();
    var colTo = $("#to_col").val();
    $.ajax({
      type: "POST",
      url: "/moveCard/"+colFrom+"/"+colTo,
      data: JSON.stringify(game),
      success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
            game = data;
            display(data);},
      contentType:"application/json; charset=utf-8",
      dataType:"json",
    });
    });


    </script>



    </body>
    </html>